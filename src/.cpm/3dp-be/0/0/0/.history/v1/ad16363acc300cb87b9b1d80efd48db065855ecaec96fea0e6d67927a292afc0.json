{"schema_version": 1, "created_at": "2026-01-31T00:19:10.121967Z", "cache_key": "sha256:ad16363acc300cb87b9b1d80efd48db065855ecaec96fea0e6d67927a292afc0", "command": {"args_canonical": {"cmd": "cpm.query", "packet_arg": "3dp-be", "packet_dir": ".cpm/3dp-be/0/0/0", "query": "How start print session?", "k": 5, "cpm_dir": ".cpm", "embedding_model": "jinaai/jina-embeddings-v2-base-code", "max_seq_length": 1024, "normalize": true, "schema_version": 1}}, "environment": {"packet_dir": ".cpm/3dp-be/0/0/0"}, "payload": {"results": [{"rank": 1, "score": 0.44603025913238525, "faiss_idx": 355, "doc": {"id": "src/main/java/it/aredegalli/printer/service/rendering/PreviewSTLService.java:java:0", "text": "package it.aredegalli.printer.service.rendering;", "metadata": {"source_id": "src/main/java/it/aredegalli/printer/service/rendering/PreviewSTLService.java", "ext": ".java", "lang": "java", "chunker": "java", "package": "package it.aredegalli.printer.service.rendering;", "preamble": true, "block_count": 1, "blocks_meta": [{"kind": "preamble", "lang": "java", "level": "parent", "package": "package it.aredegalli.printer.service.rendering;", "import_count": 0}], "path": "src/main/java/it/aredegalli/printer/service/rendering/PreviewSTLService.java"}}}, {"rank": 2, "score": 0.38519465923309326, "faiss_idx": 404, "doc": {"id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java:java:0", "text": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport it.aredegalli.printer.enums.kafka.KafkaTopicEnum;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.support.SendResult;\nimport org.springframework.stereotype.Service;\n\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class PrinterStatusControlServiceImpl implements PrinterStatusControlService {\n    // ... members ...\n}\n\n// ... code ...\n\nprivate final KafkaTemplate<String, Object> kafkaTemplate;\n@Override()\n    public CompletableFuture<SendResult<String, Object>> startPrint(PrinterStartRequestDto request) {\n        log.info(\"Starting printing for printer connected to driver id: {}\", request.getDriverId());\n        return this.kafkaTemplate.send(KafkaTopicEnum.PRINTER_START_REQUEST.getTopicName(), request.getDriverId(), request)\n                .whenComplete((result, ex) -> {\n                    if (ex == null) {\n                        log.info(\"Printer start request sent successfully: offset={}\", result.getRecordMetadata().offset());\n                    } else {\n                        log.error(\"Failed to send printer start request\", ex);\n                    }\n                });\n    }\n@Override()\n    public CompletableFuture<SendResult<String, Object>> stopPrint(PrinterStopRequestDto request) {\n        log.info(\"Stopping printing for printer connected to driver id: {}\", request.getDriverId());\n        return this.kafkaTemplate.send(KafkaTopicEnum.PRINTER_STOP_REQUEST.getTopicName(), request.getDriverId(), request)\n                .whenComplete((result, ex) -> {\n                    if (ex == null) {\n                        log.info(\"Printer stop request sent successfully: offset={}\", result.getRecordMetadata().offset());\n                    } else {\n                        log.error(\"Failed to send printer stop request\", ex);\n                    }\n                });\n    }\n@Override()\n    public CompletableFuture<SendResult<String, Object>> pausePrint(PrinterPauseRequestDto request) {\n        log.info(\"Pausing printing for printer connected to driver id: {}\", request.getDriverId());\n        return this.kafkaTemplate.send(KafkaTopicEnum.PRINTER_PAUSE_REQUEST.getTopicName(), request.getDriverId(), request)\n                .whenComplete((result, ex) -> {\n                    if (ex == null) {\n                        log.info(\"Printer pausing request sent successfully: offset={}\", result.getRecordMetadata().offset());\n                    } else {\n                        log.error(\"Failed to send printer pausing request\", ex);\n                    }\n                });\n    }", "metadata": {"source_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java", "ext": ".java", "lang": "java", "chunker": "java", "package": "package it.aredegalli.printer.service.kafka.control.status;", "block_count": 4, "blocks_meta": [{"kind": "symbol_child", "node_type": "field_declaration", "symbol": "kafkaTemplate", "qualified_name": "PrinterStatusControlServiceImpl.kafkaTemplate", "symbol_class": "unknown", "lang": "java", "line_start": 20, "line_end": 20, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java:java:field_declaration:PrinterStatusControlServiceImpl.kafkaTemplate:20-20", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class PrinterStatusControlServiceImpl implements PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport it.aredegalli.printer.enums.kafka.KafkaTopicEnum;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.support.SendResult;\nimport org.springframework.stereotype.Service;\n\nimport java.util.concurrent.CompletableFuture;"}, {"kind": "symbol_child", "node_type": "method_declaration", "symbol": "startPrint", "qualified_name": "PrinterStatusControlServiceImpl.startPrint", "symbol_class": "method", "lang": "java", "line_start": 22, "line_end": 34, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java:java:method_declaration:PrinterStatusControlServiceImpl.startPrint:22-34", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class PrinterStatusControlServiceImpl implements PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport it.aredegalli.printer.enums.kafka.KafkaTopicEnum;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.support.SendResult;\nimport org.springframework.stereotype.Service;\n\nimport java.util.concurrent.CompletableFuture;"}, {"kind": "symbol_child", "node_type": "method_declaration", "symbol": "stopPrint", "qualified_name": "PrinterStatusControlServiceImpl.stopPrint", "symbol_class": "method", "lang": "java", "line_start": 36, "line_end": 48, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java:java:method_declaration:PrinterStatusControlServiceImpl.stopPrint:36-48", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class PrinterStatusControlServiceImpl implements PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport it.aredegalli.printer.enums.kafka.KafkaTopicEnum;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.support.SendResult;\nimport org.springframework.stereotype.Service;\n\nimport java.util.concurrent.CompletableFuture;"}, {"kind": "symbol_child", "node_type": "method_declaration", "symbol": "pausePrint", "qualified_name": "PrinterStatusControlServiceImpl.pausePrint", "symbol_class": "method", "lang": "java", "line_start": 50, "line_end": 62, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java:java:method_declaration:PrinterStatusControlServiceImpl.pausePrint:50-62", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class PrinterStatusControlServiceImpl implements PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport it.aredegalli.printer.enums.kafka.KafkaTopicEnum;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.support.SendResult;\nimport org.springframework.stereotype.Service;\n\nimport java.util.concurrent.CompletableFuture;"}], "path": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlServiceImpl.java"}}}, {"rank": 3, "score": 0.3574150800704956, "faiss_idx": 35, "doc": {"id": "src/main/java/it/aredegalli/printer/controller/api/CommandExecutionController.java:java:0", "text": "package it.aredegalli.printer.controller.api;\n\nimport it.aredegalli.printer.dto.kafka.control.command.PrinterCommandPreRequestDto;\nimport it.aredegalli.printer.service.kafka.control.command.PrinterCommandService;\nimport it.aredegalli.printer.service.log.LogService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.mvc.method.annotation.SseEmitter;\n\nimport java.util.UUID;", "metadata": {"source_id": "src/main/java/it/aredegalli/printer/controller/api/CommandExecutionController.java", "ext": ".java", "lang": "java", "chunker": "java", "package": "package it.aredegalli.printer.controller.api;", "preamble": true, "block_count": 1, "blocks_meta": [{"kind": "preamble", "lang": "java", "level": "parent", "package": "package it.aredegalli.printer.controller.api;", "import_count": 9}], "path": "src/main/java/it/aredegalli/printer/controller/api/CommandExecutionController.java"}}}, {"rank": 4, "score": 0.3550679683685303, "faiss_idx": 402, "doc": {"id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlService.java:java:0", "text": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport org.springframework.kafka.support.SendResult;\n\nimport java.util.concurrent.CompletableFuture;\n\npublic interface PrinterStatusControlService {\n    // ... members ...\n}\n\n// ... code ...\n\nCompletableFuture<SendResult<String, Object>> startPrint(PrinterStartRequestDto request);\nCompletableFuture<SendResult<String, Object>> stopPrint(PrinterStopRequestDto request);\nCompletableFuture<SendResult<String, Object>> pausePrint(PrinterPauseRequestDto request);", "metadata": {"source_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlService.java", "ext": ".java", "lang": "java", "chunker": "java", "package": "package it.aredegalli.printer.service.kafka.control.status;", "block_count": 3, "blocks_meta": [{"kind": "symbol_child", "node_type": "method_declaration", "symbol": "startPrint", "qualified_name": "PrinterStatusControlService.startPrint", "symbol_class": "method", "lang": "java", "line_start": 11, "line_end": 11, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlService.java:java:method_declaration:PrinterStatusControlService.startPrint:11-11", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "public interface PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport org.springframework.kafka.support.SendResult;\n\nimport java.util.concurrent.CompletableFuture;"}, {"kind": "symbol_child", "node_type": "method_declaration", "symbol": "stopPrint", "qualified_name": "PrinterStatusControlService.stopPrint", "symbol_class": "method", "lang": "java", "line_start": 13, "line_end": 13, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlService.java:java:method_declaration:PrinterStatusControlService.stopPrint:13-13", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "public interface PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport org.springframework.kafka.support.SendResult;\n\nimport java.util.concurrent.CompletableFuture;"}, {"kind": "symbol_child", "node_type": "method_declaration", "symbol": "pausePrint", "qualified_name": "PrinterStatusControlService.pausePrint", "symbol_class": "method", "lang": "java", "line_start": 15, "line_end": 15, "level": "child", "parent_id": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlService.java:java:method_declaration:PrinterStatusControlService.pausePrint:15-15", "annotations": [], "has_javadoc": false, "child_index": 0, "_class_context": "public interface PrinterStatusControlService {\n    // ... members ...\n}", "_file_header": "package it.aredegalli.printer.service.kafka.control.status;\n\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterPauseRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStartRequestDto;\nimport it.aredegalli.printer.dto.kafka.control.status.PrinterStopRequestDto;\nimport org.springframework.kafka.support.SendResult;\n\nimport java.util.concurrent.CompletableFuture;"}], "path": "src/main/java/it/aredegalli/printer/service/kafka/control/status/PrinterStatusControlService.java"}}}, {"rank": 5, "score": 0.34680405259132385, "faiss_idx": 49, "doc": {"id": "src/main/java/it/aredegalli/printer/controller/open/ResourceDownloadController.java:java:0", "text": "package it.aredegalli.printer.controller.open;\n\nimport it.aredegalli.printer.service.resource.FileResourceService;\nimport jakarta.validation.constraints.NotNull;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.servlet.mvc.method.annotation.StreamingResponseBody;\n\nimport java.io.IOException;\nimport java.io.InputStream;", "metadata": {"source_id": "src/main/java/it/aredegalli/printer/controller/open/ResourceDownloadController.java", "ext": ".java", "lang": "java", "chunker": "java", "package": "package it.aredegalli.printer.controller.open;", "preamble": true, "block_count": 1, "blocks_meta": [{"kind": "preamble", "lang": "java", "level": "parent", "package": "package it.aredegalli.printer.controller.open;", "import_count": 13}], "path": "src/main/java/it/aredegalli/printer/controller/open/ResourceDownloadController.java"}}}], "query_vec": null, "result_vecs": null}}